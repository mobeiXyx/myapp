<html>
<head>
        <script>
            

           
             //绘制
            function draw(canvas)
            {

                
                var canvas=document.getElementsByID("canvas");
                var line=new Array;
                var n=0;

                var file=document.getElementById("file").files[0];
                var reader=new FileReader();
                reader.readAsText(file);
                var fileText = e.target.result.split("\n");
                
                reader.onload = function (e) 
                {
                    for (var i=0;i<fileText.length;i++)
                    {
                        line[n]=new Array;
                        var k=0;
                        line[n][k]=new object;

                        if(fileText[i].length!=1 &&fileText[i]!="end" ) //取出所有非END的行
                            {
                                var arr=fileText[i].split(",");//将编号、x、y分隔开
                                line[n][k].x=arr[0];
                                line[n][k].y=arr[1];
                                k++;

                            }
                            else
                            {
                                n++;
                                k=0;
                            }
                    }
              
                }

                
                var ctx = canvas.getContext("2d");  
                ctx.lineWidth =5;
                ctx.strokeStyle ='red';   
                
                  
                for(var i=0;i<n+1;i++)
                {   
                    var pointl=line[i].length;
                    for(var j=0;j<pointl-1;j++)
                    {
                        cxt.beginPath();
                        cxt.moveTo((line[i][j].x)*10,(line[i][j].y)*10);
                        cxt.lineTo((line[i][j+1].x)*10,(line[i][j+1].y)*10);
                        cxt.stroke();
                    }
                }
                
            }

        
        
        </script>

</head>
<body>
        <p>
                选择文件:<input type="file" id="file" >
              
            </p>
           
            <p>
                <input type="submit" id="button"  value="绘制" onclick="draw(canvas)">
                
            </p>
            <div id="tt">
                    </div>

            <table width="300" height="300" border="1">
              
              <tr>
                <th scope="col"><canvas id="canvas"></canvas></th>
                
              </tr>
            </table>


</body>
</html>
    